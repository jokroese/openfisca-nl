# Test files describe situations and their expected outcomes
# Tests for disposable income calculation after Dutch taxes

- name: Single person earning €3000/month in 2025
  absolute_error_margin: 2.0
  period: 2025-01
  input:
    persons:
      Jan:
        salary: 3000
    household:
      adults: [ Jan ]
      accommodation_size: 50
      housing_occupancy_status: tenant
  output:
    # Salary: 3000
    # Income tax: ~518 (from tax brackets minus credits)
    # Social security: ~834 (3000 * 0.278)
    # Housing tax: ~58/month (50m2 * 14 / 12)
    # Disposable: 3000 - 518 - 834 - 58 = ~1590
    disposable_income: 1590

- name: Self-employed person earning €3000/month profit in 2025
  absolute_error_margin: 2.0
  period: 2025-01
  input:
    persons:
      Marie:
        winst_voor_aftrek: 3000
        urencriterium_voldaan:
          2025: true
    household:
      adults: [ Marie ]
      accommodation_size: 60
      housing_occupancy_status: owner
  output:
    # Winst: 3000
    # Zelfstandigenaftrek: 183.33 (2200/12)
    # MKB vrijstelling: ~375 ((3000-183.33)*0.1331)
    # Taxable: ~2441.67
    # After tax and social security: ~1790
    disposable_income: 1790

- name: AOW-age person with €3000/month in 2025
  absolute_error_margin: 2.0
  period: 2025-01
  input:
    persons:
      Piet:
        birth:
          1955-06-15
        salary: 3000
    household:
      adults: [ Piet ]
      accommodation_size: 80
      housing_occupancy_status: owner
  output:
    # Person is 69 years old (above AOW age of 67)
    # Uses AOW tax scale with lower first bracket rate (~19% vs ~36%)
    # Lower tax means higher disposable income than non-AOW person
    # Disposable: ~1890 (vs ~1590 for non-AOW)
    disposable_income: 1890

- name: Couple earning €2500 each in Jan 2025
  absolute_error_margin: 10.0
  period: 2025-01
  input:
    household:
      adults: [ Lautaro, Caupolicán ]
      accommodation_size: 100
      housing_occupancy_status: tenant
    persons:
      Lautaro:
        salary: 2500
      Caupolicán:
        salary: 2500
  output:
    # Each earns 2500, after tax/SS: ~1680 each
    # Total: ~3360, minus housing tax ~117 = ~3243
    disposable_income: 3243

- name: High earner couple in Jan 2025
  absolute_error_margin: 50.0
  period: 2025-01
  input:
    household:
      adults: [ Gwendolyne, Sarah ]
      accommodation_size: 150
      housing_occupancy_status: owner
    persons:
      Gwendolyne:
        salary: 4000
      Sarah:
        salary: 6000
  output:
    # Combined €10,000/month
    # After taxes and SS: ~6650
    disposable_income: 6650

- name: Employee earning €3000/month in 2024
  absolute_error_margin: 2.0
  period: 2024-01
  input:
    persons:
      Erik:
        salary: 3000
    household:
      adults: [ Erik ]
      accommodation_size: 50
      housing_occupancy_status: tenant
  output:
    # Using 2024 brackets and credits
    # Disposable: ~1580
    disposable_income: 1580

- name: Employee earning €3000/month in 2023
  absolute_error_margin: 2.0
  period: 2023-01
  input:
    persons:
      Anna:
        salary: 3000
    household:
      adults: [ Anna ]
      accommodation_size: 50
      housing_occupancy_status: tenant
  output:
    # Using 2023 brackets and credits
    # Disposable: ~1540
    disposable_income: 1540
