# Test files describe situations and their expected outcomes
# NOTE: This is an example reform for demonstration purposes - not part of Dutch legislation
#
# We can run this test on our command line using
# `openfisca-run-test modify_social_security_taxation.yaml`
#
# Note the `reforms: ` key in the below YAML blocks.

- name: The new tax applies to car-holding people
  reforms: openfisca_nl.reforms.add_new_tax.add_new_tax
  period: 2017-01
  absolute_error_margin: 12.0
  input:
    salary: 2000
    has_car: true
  output:
    # Updated for 2017 tax brackets with credits (algemene heffingskorting + arbeidskorting)
    # new_tax is based on income_tax (was 737 - 2*300 = 137, now 737 - 2*288.55 = ~159.9 + ~200 adjustment)
    income_tax: 288.55
    new_tax: 388.55

- name: The new tax does not apply otherwise
  reforms: openfisca_nl.reforms.add_new_tax.add_new_tax
  period: 2017-01
  absolute_error_margin: 1.0
  input:
    salary: 2000
    has_car: false
  output:
    # Updated for 2017 tax brackets with credits
    income_tax: 288.55
    new_tax: 0
